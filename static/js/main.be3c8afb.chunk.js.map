{"version":3,"sources":["../../src/fallback.js","../../src/lru-cache.js","../../src/box-template.js","../../src/async-hoc.js","../../src/slot.js","../../src/debounce.js","examples/example-1.js","examples/example-2.js","examples/example-3.js","examples/example-4.js","App.js","index.js"],"names":["fallbackContext","React","LRUCache","size","maxAge","this","_putAtTop","current","Date","set","map","get","prev","next","key","time","tail","end","scan","oneHundredPercent","width","BoxTemplate","$parts","parts","Object","isNaN","a","b","style","component","cache","createAsyncComponent","Template","fn","refreshFn","result","props","renderKey","self","each","useRef","fallback","useContext","keyFn","JSON","useState","0","returnValue","setReturnValue","state","currentSet","currentValue","value","useDynamicState","seq","updateSeq","getSeq","running","currentSeq","resolve","part","id","Error","basicResult","restart","e","keyExtraction","SimpleBox","background","height","Slot","fill","Skeleton","setVisible","params","clearTimeout","setTimeout","debounce","visible","initialFill","opacity","overflow","setComponent","filled","setFilled","go","useEffect","useStyles","makeStyles","theme","icon","backgroundColor","palette","primary","main","ExampleComponent1","lat","lon","classes","fetch","response","json","data","List","ListItem","ListItemText","weather","secondary","timezone","ListItemAvatar","Avatar","className","temp","humidity","ExampleComponent2","Promise","i","padding","onClick","cursor","color","ExampleComponent3","order","item","Box","p","ml","CircularProgress","ExampleComponent4","Grid","container","spacing","xs","Card","variant","CardHeader","title","subheader","CardContent","location","animation","searchFor","method","headers","googleResponse","places","ListSubheader","results","candidate","index","name","vicinity","App","CssBaseline","AppBar","Toolbar","Typography","mt","Container","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.be3c8afb.chunk.js","sourcesContent":["import React from 'react'\n\nexport const fallbackContext = React.createContext(null)\n\nexport function AsyncFallback({fallback, children}) {\n    return (\n        <fallbackContext.Provider value={fallback}>\n            {children}\n        </fallbackContext.Provider>\n    )\n}\n","\nexport default LRUCache\nexport class LRUCache {\n    constructor(size = 50, {maxAge}={}) {\n        this.size = size\n        this.maxAge = maxAge\n        this.map = new Map()\n        this.head = null\n        this.tail = null\n    }\n\n    _putAtTop(current) {\n        if(current === this.tail) {\n            this.tail = current.prev\n        }\n        current.prev && (current.prev.next = current.next)\n        current.next && (current.next.prev = current.prev)\n        current.prev = null\n        current.next = this.head\n        current.time = Date.now()\n        this.head = current\n\n    }\n\n    set(key, value) {\n        let current = this.map.get(key)\n        if(current) {\n            this._putAtTop(current)\n        } else {\n            current = {prev: null, next: this.head, key, time: Date.now()}\n            if(!this.tail) this.tail = current\n            this.head = current\n        }\n        current.value = value\n        this.map.set(key, current)\n        if(this.map.size > this.size) {\n            this.map.delete(this.tail.key)\n            this.tail && this.tail.prev && (this.tail.prev.next = null)\n            this.tail = this.tail.prev\n        }\n    }\n\n    get(key) {\n        const current =  this.map.get(key)\n        if(this.maxAge && Date.now() - current.time > this.maxAge) {\n            const end = current.prev\n            let scan = current\n            while(scan) {\n                this.map.delete(scan.key)\n                scan = scan.next\n            }\n            end && (end.next = null)\n            this.tail = end\n            return\n        }\n        if(current) {\n            this._putAtTop(current)\n            return current.value\n        }\n    }\n}\n","import React, {Fragment} from 'react'\n\nconst oneHundredPercent = {width: '100%'}\n\nexport function BoxTemplate({$parts}) {\n    const parts = Object.entries($parts)\n    parts.sort((a, b) => {\n        if (isNaN(+a[0])) {\n            return a[0].localeCompare(`${b[0]}`)\n        } else {\n            return +a[0] - +b[0]\n        }\n    })\n    return (\n        <div style={oneHundredPercent}>\n            {parts.map(([key, component]) => {\n                return <Fragment key={key}>{component}</Fragment>\n            })}\n        </div>\n    )\n}\n","import React, { useContext, useRef, useState } from 'react'\nimport { LRUCache } from './lru-cache'\nimport { BoxTemplate } from './box-template'\nimport { fallbackContext } from './fallback'\n\nlet cache = new LRUCache(100)\n\nexport function initializeCache(size = 100) {\n    cache = new LRUCache(size)\n}\n\nexport function useDynamicState(state) {\n    const currentSet = useRef()\n    const currentValue = useRef()\n    const [value, set] = useState(state)\n    currentSet.current = set\n    currentValue.current = value\n    return [value, (v) => currentSet.current(v), ()=>currentValue.current]\n}\n\nexport function createAsyncComponent(Template, fn) {\n    if (!fn) {\n        fn = Template\n        Template = BoxTemplate\n    }\n    let keyFn\n    let refreshFn = () => 'standard'\n    let result = function Component(props) {\n        let {renderKey} = props\n        const self = this\n        const each = useRef()\n        const fallback = useContext(fallbackContext)\n        if (keyFn && !renderKey) {\n            renderKey = keyFn.call(self, props)\n        }\n        if (renderKey && typeof renderKey !== 'string') {\n            renderKey = JSON.stringify(renderKey)\n        }\n        const [returnValue, setReturnValue] = useState(() => {\n            if (renderKey) {\n                return cache.get(renderKey) || { 0: fallback }\n            }\n            return { 0: fallback }\n        })\n        const state = useRef()\n        const [seq, updateSeq, getSeq] = useDynamicState(0)\n        state.current = returnValue\n        const running = useRef()\n        const currentSeq = JSON.stringify([refreshFn(), seq])\n        if (each.current) {\n            each.current()\n        }\n        if (running.current !== currentSeq) {\n            running.current = currentSeq\n            const resolve = setResult(currentSeq)\n            let basicResult = fn.call(self, {\n                ...props,\n                resolve,\n                restart\n            })\n\n            if (typeof basicResult === 'function' && !basicResult.then) {\n                each.current = () =>\n                    fn.call(self, {\n                        ...props,\n                        resolve,\n                        restart\n                    })\n                basicResult = basicResult()\n            }\n            basicResult.then(function (result) {\n                if (result) {\n                    resolve(result)\n                }\n            }).catch(error)\n        }\n        if (renderKey) {\n            cache.set(renderKey, returnValue)\n        }\n        return <Template {...props} $parts={returnValue} />\n\n        function setResult(id) {\n            return function (key, part) {\n\n                if (id !== running.current) {\n                    throw new Error('Cancel')\n                }\n\n                if (part) {\n                    setReturnValue(state.current ={ ...state.current, [key]: part })\n\n                } else if (key) {\n                    if (typeof key === 'object') {\n                        if (key.$$typeof) {\n                            setReturnValue(state.current = { 0: key })\n                        } else {\n                            setReturnValue(state.current = { ...state.current, ...key })\n                        }\n                    } else {\n                        setReturnValue(state.current  ={ 0: key })\n                    }\n                }\n            }\n        }\n\n        function error(e) {\n            if(e.message !== 'Cancel') {\n                throw e\n            }\n        }\n\n        function restart() {\n            updateSeq(getSeq()+1)\n        }\n    }\n    result.keyFn = function (keyExtraction) {\n        keyFn = keyExtraction\n        return result\n    }\n    result.refreshFn = function (keyExtraction) {\n        refreshFn = keyExtraction\n        return result\n    }\n    return result\n\n\n}\n","import React, {useEffect, useRef, useState, Fragment} from 'react'\nimport {debounce} from './debounce'\n\nfunction SimpleBox(props) {\n    return (\n        <div\n            {...props}\n            style={{\n                background: '#444',\n                width: props.width || '100%',\n                height: props.height,\n                ...props.style\n            }}\n        />\n    )\n}\n\nexport function Slot({fill, Skeleton = SimpleBox, ...props}) {\n    const [setVisible] = useState(() => debounce(visible, 50))\n    const [initialFill] = useState(fill)\n\n    const [component, setComponent] = useState({\n        opacity: 0,\n        height: 0,\n        overflow: 'hidden',\n        width: '100%'\n    })\n    const [filled, setFilled] = useState(false)\n    const go = useRef(false)\n    useEffect(() => {\n        if (fill && !filled) {\n            go.current = true\n            setVisible()\n        }\n    })\n    if (initialFill) {\n        return fill\n    }\n    return (\n        <Fragment>\n            {!filled && <div><Skeleton {...props} /></div>}\n            {!!fill && <div style={component}>{fill}</div>}\n        </Fragment>\n    )\n\n    function visible() {\n        setComponent({})\n        setFilled(true)\n        go.current = false\n    }\n}\n","export function debounce(fn, time) {\n    let id\n    return function (...params) {\n        clearTimeout(id)\n        id = setTimeout(() => fn(...params), time)\n    }\n}\n","import React from 'react'\nimport {createAsyncComponent} from 'react-async-component-hoc'\nimport ListItem from '@material-ui/core/ListItem'\nimport List from '@material-ui/core/List'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport Avatar from '@material-ui/core/Avatar'\nimport {FaThermometerFull, GiWaterDrop} from 'react-icons/all'\nimport {makeStyles} from '@material-ui/core/styles'\n\nconst API_KEY = '79ba901022c6291b872ce2dba7955595'\n\nconst useStyles = makeStyles(theme=>{\n    return {\n        icon: {\n            backgroundColor: theme.palette.primary.main\n        }\n    }\n})\n\nexport const ExampleComponent1 = createAsyncComponent(function Weather({\n    lat,\n    lon\n}) {\n    const classes = useStyles()\n    return async ()=> {\n        const response = await fetch(\n            `https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&units=metric&appid=${API_KEY}`\n        )\n        const data = await response.json()\n        return <List>\n            <ListItem>\n                <ListItemText primary={data.current.weather[0].main} secondary={data.timezone}/>\n            </ListItem>\n            <ListItem>\n                <ListItemAvatar>\n                    <Avatar className={classes.icon}>\n                        <FaThermometerFull/>\n                    </Avatar>\n                </ListItemAvatar>\n                <ListItemText primary={`${data.current.temp} C`} secondary={\"Temperature\"}/>\n            </ListItem>\n            <ListItem>\n                <ListItemAvatar>\n                    <Avatar className={classes.icon}>\n                        <GiWaterDrop/>\n                    </Avatar>\n                </ListItemAvatar>\n                <ListItemText primary={`${data.current.humidity}%`} secondary={\"Humidity\"}/>\n            </ListItem>\n        </List>\n    }\n})\n","import React from 'react'\nimport {createAsyncComponent} from 'react-async-component-hoc'\n\nexport const ExampleComponent2 = createAsyncComponent(\n    async function MyComponent({resolve, restart}) {\n        resolve(<h4>Ready</h4>)\n        await new Promise((resolve) => setTimeout(resolve, 1000))\n        for (let i = 0; i < 101; i++) {\n            await new Promise((resolve) => setTimeout(resolve, 50))\n            resolve(\n                <div\n\n                    style={{width: '100%', background: '#888'}}\n                >\n                    <div\n                        style={{\n                            width: `${i * 1}%`,\n                            background: '#9f54da',\n                            padding: 16\n                        }}\n                    >\n                        {i}\n                    </div>\n                    <div onClick={() => restart()} style={{cursor: 'pointer', padding: 7, color: 'white'}}>\n                        Click to restart\n                    </div>\n                </div>\n            )\n        }\n        return <h4>Done</h4>\n    }\n)\n","import React from 'react'\nimport { createAsyncComponent } from 'react-async-component-hoc'\nimport Box from '@material-ui/core/Box'\nimport CircularProgress from '@material-ui/core/CircularProgress'\n\nexport const ExampleComponent3 = createAsyncComponent(\n    async function MyComponent({ resolve }) {\n        const order = [10, 7, 4, 1, 2, 8, 6, 9, 3, 5]\n        for (let i = 0; i < 10; i++) {\n            let item = order[i]\n            resolve(\n                item,\n                <Box p={1}>\n                    I am item index {item} - rendered in sequence {i + 1}\n                </Box>\n            )\n\n            if (i < 9) {\n                resolve(order[i + 1], <Box ml={1}><CircularProgress color={\"secondary\"} size={20}/></Box>)\n            }\n            await new Promise((resolve) => setTimeout(resolve, 1500))\n        }\n    }\n)\n","import React from 'react'\nimport {createAsyncComponent, Slot} from 'react-async-component-hoc'\nimport Grid from '@material-ui/core/Grid'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport {makeStyles} from '@material-ui/core/styles'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\nimport Avatar from '@material-ui/core/Avatar'\nimport {FaThermometerFull, GiWaterDrop} from 'react-icons/all'\nimport List from '@material-ui/core/List'\nimport ListSubheader from '@material-ui/core/ListSubheader'\nimport Skeleton from '@material-ui/lab/Skeleton'\n\nconst WEATHER_API_KEY = '79ba901022c6291b872ce2dba7955595'\nconst GOOGLE_KEY = 'AIzaSyA1FojG9QXGGhsDC0lyAqt48A7csv7XO3s'\n\nconst useStyles = makeStyles((theme) => {\n    return {\n        icon: {\n            backgroundColor: theme.palette.primary.main\n        }\n    }\n})\n\nexport const ExampleComponent4 = createAsyncComponent(\n    function Template({ $parts }) {\n        return (\n            <Grid container spacing={3}>\n                <Grid item xs={6}>\n                    <Card variant={\"outlined\"}>\n                        <CardHeader title={'Weather'} subheader={\"Will be rendered as soon as possible, before the location search\"}/>\n                        <CardContent>\n                            <Slot fill={$parts.weather} height={150}/>\n                        </CardContent>\n                    </Card>\n                </Grid>\n                <Grid item xs={6}>\n                    <Card variant={\"outlined\"}>\n                        <CardHeader title={'Where shall we go?'} subheader={\"Searches for restaurants if the temperature is < 16C, otherwise parks\"}/>\n                        <CardContent>\n                            <Slot fill={$parts.location} Skeleton={Skeleton} animation=\"wave\" variant=\"rect\" height={600}/>\n                        </CardContent>\n                    </Card>\n                </Grid>\n            </Grid>\n        )\n    },\n    function MyComponent({ resolve, lat, lon }) {\n        const classes = useStyles()\n        return async () => {\n            const response = await fetch(\n                `https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&units=metric&appid=${WEATHER_API_KEY}`\n            )\n            const data = await response.json()\n            resolve(\n                'weather',\n                <List>\n\n                    <ListItem>\n                        <ListItemText\n                            primary={data.current.weather[0].main}\n                            secondary={data.timezone}\n                        />\n                    </ListItem>\n                    <ListItem>\n                        <ListItemAvatar>\n                            <Avatar className={classes.icon}>\n                                <FaThermometerFull />\n                            </Avatar>\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={`${data.current.temp} C`}\n                            secondary={'Temperature'}\n                        />\n                    </ListItem>\n                    <ListItem>\n                        <ListItemAvatar>\n                            <Avatar className={classes.icon}>\n                                <GiWaterDrop />\n                            </Avatar>\n                        </ListItemAvatar>\n                        <ListItemText\n                            primary={`${data.current.humidity}%`}\n                            secondary={'Humidity'}\n                        />\n                    </ListItem>\n                </List>\n            )\n            const searchFor = data.current.temp < 16 ? 'restaurant' : 'park'\n            const googleResponse = await fetch(\n                `https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/nearbysearch/json?key=${GOOGLE_KEY}&location=${lat},${lon}&radius=60000&type=${searchFor}`,\n                {method: 'get', headers: {'Accept': 'application/json', 'Access-Control-Allow-Origin': '*'}}\n            )\n            await new Promise(resolve=>setTimeout(resolve, 2000))\n            const places = await googleResponse.json()\n            resolve(\n                'location',\n\n                <List>\n                    <ListSubheader>Searching for {searchFor}s</ListSubheader>\n                    {places.results.map((candidate, index) => {\n                        return (\n                            <ListItem key={index}>\n                                <ListItemText\n                                    primary={candidate.name}\n                                    secondary={candidate.vicinity}\n                                />\n                            </ListItem>\n                        )\n                    })}\n                </List>\n            )\n        }\n    }\n)\n","import React from 'react'\n\nimport 'react-async-component-hoc/dist/index.css'\nimport Container from '@material-ui/core/Container'\nimport AppBar from '@material-ui/core/AppBar'\nimport Box from '@material-ui/core/Box'\nimport Card from '@material-ui/core/Card'\nimport CardHeader from '@material-ui/core/CardHeader'\nimport CardContent from '@material-ui/core/CardContent'\nimport { ExampleComponent1 } from './examples/example-1'\nimport { ExampleComponent2 } from './examples/example-2'\nimport { ExampleComponent3 } from './examples/example-3'\nimport { ExampleComponent4 } from './examples/example-4'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport Typography from '@material-ui/core/Typography'\nimport Toolbar from '@material-ui/core/Toolbar'\n\nconst App = () => {\n    return (\n        <>\n            <CssBaseline />\n            <AppBar>\n                <Toolbar>\n                    <Typography variant={\"h6\"}>\n                        react-async-component-hoc\n                    </Typography>\n                    <Box ml={3}>Examples</Box>\n                </Toolbar>\n\n            </AppBar>\n            <Box mt={10}>\n                <Container>\n                    <Card>\n                        <CardHeader\n                            title={'Weather'}\n                            subheader={'Simple Api Call'}\n                        />\n                        <CardContent>\n                            <ExampleComponent1 lat={-34.397} lon={150.644} />\n                        </CardContent>\n                    </Card>\n                    <Box mt={2}>\n                        <Card>\n                            <CardHeader\n                                title={'Progress'}\n                                subheader={'Repeated render / progress example'}\n                            />\n                            <CardContent>\n                                <ExampleComponent2 />\n                            </CardContent>\n                        </Card>\n                    </Box>\n                    <Box mt={2}>\n                        <Card>\n                            <CardHeader\n                                title={'Out of sequence'}\n                                subheader={'Multipart render using the built in template'}\n                            />\n                            <CardContent>\n                                <ExampleComponent3 />\n                            </CardContent>\n                        </Card>\n                    </Box>\n                    <Box mt={2}>\n                        <Card>\n                            <CardHeader\n                                title={'Render partial results'}\n                                subheader={\n                                    'Renders some of the results as soon as possible inside a programmer supplied template'\n                                }\n                            />\n                            <CardContent>\n                                <ExampleComponent4\n                                    lat={-34.397}\n                                    lon={150.644}\n                                />\n                            </CardContent>\n                        </Card>\n                    </Box>\n                </Container>\n            </Box>\n        </>\n    )\n}\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}