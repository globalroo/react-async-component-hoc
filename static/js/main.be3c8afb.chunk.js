(this["webpackJsonpreact-async-component-hoc-example"]=this["webpackJsonpreact-async-component-hoc-example"]||[]).push([[0],{45:function(e,t,a){e.exports=a(59)},46:function(e,t,a){},53:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);a(46);var n=a(1),r=a.n(n),c=a(12),l=a.n(c),i=(a(53),a(96)),u=a(94),o=a(97),s=a(88),m=a(89),p=a(90),h=a(10),f=a.n(h),d=a(13),E=r.a.createContext(null);var v=function(){function e(e,t){void 0===e&&(e=50);var a=(void 0===t?{}:t).maxAge;this.size=e,this.maxAge=a,this.map=new Map,this.head=null,this.tail=null}var t=e.prototype;return t._putAtTop=function(e){e===this.tail&&(this.tail=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),e.prev=null,e.next=this.head,e.time=Date.now(),this.head=e},t.set=function(e,t){var a=this.map.get(e);a?this._putAtTop(a):(a={prev:null,next:this.head,key:e,time:Date.now()},this.tail||(this.tail=a),this.head=a),a.value=t,this.map.set(e,a),this.map.size>this.size&&(this.map.delete(this.tail.key),this.tail&&this.tail.prev&&(this.tail.prev.next=null),this.tail=this.tail.prev)},t.get=function(e){var t=this.map.get(e);if(this.maxAge&&Date.now()-t.time>this.maxAge){for(var a=t.prev,n=t;n;)this.map.delete(n.key),n=n.next;return a&&(a.next=null),void(this.tail=a)}if(t)return this._putAtTop(t),t.value},e}();function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var b={width:"100%"};function g(e){var t=e.$parts,a=Object.entries(t);return a.sort((function(e,t){return isNaN(+e[0])?e[0].localeCompare(""+t[0]):+e[0]-+t[0]})),r.a.createElement("div",{style:b},a.map((function(e){var t=e[0],a=e[1];return r.a.createElement(n.Fragment,{key:t},a)})))}var w=new v(100);function x(e,t){var a;t||(t=e,e=g);var c=function(){return"standard"},l=function(l){var i=l.renderKey,u=this,o=Object(n.useRef)(),s=Object(n.useContext)(E);a&&!i&&(i=a.call(u,l)),i&&"string"!==typeof i&&(i=JSON.stringify(i));var m=Object(n.useState)((function(){return i&&w.get(i)||{0:s}})),p=m[0],h=m[1],f=Object(n.useRef)(),d=function(e){var t=Object(n.useRef)(),a=Object(n.useRef)(),r=Object(n.useState)(e),c=r[0],l=r[1];return t.current=l,a.current=c,[c,function(e){return t.current(e)},function(){return a.current}]}(0),v=d[0],b=d[1],g=d[2];f.current=p;var x,j=Object(n.useRef)(),k=JSON.stringify([c(),v]);if(o.current&&o.current(),j.current!==k){j.current=k;var O=(x=k,function(e,t){if(x!==j.current)throw new Error("Cancel");var a;t?h(f.current=y(y({},f.current),{},((a={})[e]=t,a))):e&&("object"===typeof e?e.$$typeof?h(f.current={0:e}):h(f.current=y(y({},f.current),e)):h(f.current={0:e}))}),A=t.call(u,y(y({},l),{},{resolve:O,restart:C}));"function"!==typeof A||A.then||(o.current=function(){return t.call(u,y(y({},l),{},{resolve:O,restart:C}))},A=A()),A.then((function(e){e&&O(e)})).catch((function(e){if("Cancel"!==e.message)throw e}))}return i&&w.set(i,p),r.a.createElement(e,y({},l,{$parts:p}));function C(){b(g()+1)}};return l.keyFn=function(e){return a=e,l},l.refreshFn=function(e){return c=e,l},l}function j(e){return r.a.createElement("div",y({},e,{style:y({background:"#444",width:e.width||"100%",height:e.height},e.style)}))}function k(e){var t=e.fill,a=e.Skeleton,c=void 0===a?j:a,l=function(e,t){if(null==e)return{};var a,n,r={},c=Object.keys(e);for(n=0;n<c.length;n++)a=c[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["fill","Skeleton"]),i=Object(n.useState)((function(){return function(e,t){var a;return function(){for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];clearTimeout(a),a=setTimeout((function(){return e.apply(void 0,r)}),t)}}(E,50)}))[0],u=Object(n.useState)(t)[0],o=Object(n.useState)({opacity:0,height:0,overflow:"hidden",width:"100%"}),s=o[0],m=o[1],p=Object(n.useState)(!1),h=p[0],f=p[1],d=Object(n.useRef)(!1);return Object(n.useEffect)((function(){t&&!h&&(d.current=!0,i())})),u?t:r.a.createElement(n.Fragment,null,!h&&r.a.createElement("div",null,r.a.createElement(c,l)),!!t&&r.a.createElement("div",{style:s},t));function E(){m({}),f(!0),d.current=!1}}var O=a(98),A=a(81),C=a(82),S=a(83),T=a(100),R=a(84),N=a(85),z=a(80),F=Object(z.a)((function(e){return{icon:{backgroundColor:e.palette.primary.main}}})),P=x((function(e){var t=e.lat,a=e.lon,n=F();return Object(d.a)(f.a.mark((function e(){var c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(t,"&lon=").concat(a,"&units=metric&appid=").concat("79ba901022c6291b872ce2dba7955595"));case 2:return c=e.sent,e.next=5,c.json();case 5:return l=e.sent,e.abrupt("return",r.a.createElement(A.a,null,r.a.createElement(O.a,null,r.a.createElement(C.a,{primary:l.current.weather[0].main,secondary:l.timezone})),r.a.createElement(O.a,null,r.a.createElement(S.a,null,r.a.createElement(T.a,{className:n.icon},r.a.createElement(R.a,null))),r.a.createElement(C.a,{primary:"".concat(l.current.temp," C"),secondary:"Temperature"})),r.a.createElement(O.a,null,r.a.createElement(S.a,null,r.a.createElement(T.a,{className:n.icon},r.a.createElement(N.a,null))),r.a.createElement(C.a,{primary:"".concat(l.current.humidity,"%"),secondary:"Humidity"}))));case 7:case"end":return e.stop()}}),e)})))})),D=x(function(){var e=Object(d.a)(f.a.mark((function e(t){var a,n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.resolve,n=t.restart,a(r.a.createElement("h4",null,"Ready")),e.next=4,new Promise((function(e){return setTimeout(e,1e3)}));case 4:c=0;case 5:if(!(c<101)){e.next=12;break}return e.next=8,new Promise((function(e){return setTimeout(e,50)}));case 8:a(r.a.createElement("div",{style:{width:"100%",background:"#888"}},r.a.createElement("div",{style:{width:"".concat(1*c,"%"),background:"#9f54da",padding:16}},c),r.a.createElement("div",{onClick:function(){return n()},style:{cursor:"pointer",padding:7,color:"white"}},"Click to restart")));case 9:c++,e.next=5;break;case 12:return e.abrupt("return",r.a.createElement("h4",null,"Done"));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),$=a(86),J=x(function(){var e=Object(d.a)(f.a.mark((function e(t){var a,n,c,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.resolve,n=[10,7,4,1,2,8,6,9,3,5],c=0;case 3:if(!(c<10)){e.next=12;break}return l=n[c],a(l,r.a.createElement(o.a,{p:1},"I am item index ",l," - rendered in sequence ",c+1)),c<9&&a(n[c+1],r.a.createElement(o.a,{ml:1},r.a.createElement($.a,{color:"secondary",size:20}))),e.next=9,new Promise((function(e){return setTimeout(e,1500)}));case 9:c++,e.next=3;break;case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=a(87),q=a(92),G=a(91),I=Object(z.a)((function(e){return{icon:{backgroundColor:e.palette.primary.main}}})),_=x((function(e){var t=e.$parts;return r.a.createElement(W.a,{container:!0,spacing:3},r.a.createElement(W.a,{item:!0,xs:6},r.a.createElement(s.a,{variant:"outlined"},r.a.createElement(m.a,{title:"Weather",subheader:"Will be rendered as soon as possible, before the location search"}),r.a.createElement(p.a,null,r.a.createElement(k,{fill:t.weather,height:150})))),r.a.createElement(W.a,{item:!0,xs:6},r.a.createElement(s.a,{variant:"outlined"},r.a.createElement(m.a,{title:"Where shall we go?",subheader:"Searches for restaurants if the temperature is < 16C, otherwise parks"}),r.a.createElement(p.a,null,r.a.createElement(k,{fill:t.location,Skeleton:G.a,animation:"wave",variant:"rect",height:600})))))}),(function(e){var t=e.resolve,a=e.lat,n=e.lon,c=I();return Object(d.a)(f.a.mark((function e(){var l,i,u,o,s;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(a,"&lon=").concat(n,"&units=metric&appid=").concat("79ba901022c6291b872ce2dba7955595"));case 2:return l=e.sent,e.next=5,l.json();case 5:return i=e.sent,t("weather",r.a.createElement(A.a,null,r.a.createElement(O.a,null,r.a.createElement(C.a,{primary:i.current.weather[0].main,secondary:i.timezone})),r.a.createElement(O.a,null,r.a.createElement(S.a,null,r.a.createElement(T.a,{className:c.icon},r.a.createElement(R.a,null))),r.a.createElement(C.a,{primary:"".concat(i.current.temp," C"),secondary:"Temperature"})),r.a.createElement(O.a,null,r.a.createElement(S.a,null,r.a.createElement(T.a,{className:c.icon},r.a.createElement(N.a,null))),r.a.createElement(C.a,{primary:"".concat(i.current.humidity,"%"),secondary:"Humidity"})))),u=i.current.temp<16?"restaurant":"park",e.next=10,fetch("https://cors-anywhere.herokuapp.com/https://maps.googleapis.com/maps/api/place/nearbysearch/json?key=".concat("AIzaSyA1FojG9QXGGhsDC0lyAqt48A7csv7XO3s","&location=").concat(a,",").concat(n,"&radius=60000&type=").concat(u),{method:"get",headers:{Accept:"application/json","Access-Control-Allow-Origin":"*"}});case 10:return o=e.sent,e.next=13,new Promise((function(e){return setTimeout(e,2e3)}));case 13:return e.next=15,o.json();case 15:s=e.sent,t("location",r.a.createElement(A.a,null,r.a.createElement(q.a,null,"Searching for ",u,"s"),s.results.map((function(e,t){return r.a.createElement(O.a,{key:t},r.a.createElement(C.a,{primary:e.name,secondary:e.vicinity}))}))));case 17:case"end":return e.stop()}}),e)})))})),H=a(93),M=a(16),X=a(95),B=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(H.a,null),r.a.createElement(u.a,null,r.a.createElement(X.a,null,r.a.createElement(M.a,{variant:"h6"},"react-async-component-hoc"),r.a.createElement(o.a,{ml:3},"Examples"))),r.a.createElement(o.a,{mt:10},r.a.createElement(i.a,null,r.a.createElement(s.a,null,r.a.createElement(m.a,{title:"Weather",subheader:"Simple Api Call"}),r.a.createElement(p.a,null,r.a.createElement(P,{lat:-34.397,lon:150.644}))),r.a.createElement(o.a,{mt:2},r.a.createElement(s.a,null,r.a.createElement(m.a,{title:"Progress",subheader:"Repeated render / progress example"}),r.a.createElement(p.a,null,r.a.createElement(D,null)))),r.a.createElement(o.a,{mt:2},r.a.createElement(s.a,null,r.a.createElement(m.a,{title:"Out of sequence",subheader:"Multipart render using the built in template"}),r.a.createElement(p.a,null,r.a.createElement(J,null)))),r.a.createElement(o.a,{mt:2},r.a.createElement(s.a,null,r.a.createElement(m.a,{title:"Render partial results",subheader:"Renders some of the results as soon as possible inside a programmer supplied template"}),r.a.createElement(p.a,null,r.a.createElement(_,{lat:-34.397,lon:150.644})))))))};l.a.render(r.a.createElement(B,null),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.be3c8afb.chunk.js.map